---
layout: null
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Random story</title>

    <script>
        var comingFromPost = document.referrer;
        
        function linkToRandomBlogPost() {
            var allPosts = [{% for post in site.posts %}
              "{{ post.url }}"{% unless post.previous == nil %},{% endunless %}
            
            {% endfor %}];
        
        var i = 0;
        do {
            var randomPostLink = allPosts[Math.floor(Math.random() * allPosts.length)]; i++;}
        while (comingFromPost.includes(randomPostLink) || i > 10)
        
        if (i > 10 && comingFromPost !== '/random') {
            randomPostLink = '/random';
          }
        
        if (i > 10 && comingFromPost === '/random') {
            randomPostLink = '/random'
            }
        
        return randomPostLink;
        }
        
        location.replace(linkToRandomBlogPost())
        
        </script>
  
  </head>
  <body>
    <h1>Redirecting you to a random story</h1>
  </body>
</html>